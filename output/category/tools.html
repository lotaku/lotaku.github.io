<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>A Pelican Blog - Tools</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="A Pelican Blog Atom Feed" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">A Pelican Blog </a></h1>
                <nav><ul>
                    <li><a href="/category/entertainment.html">Entertainment</a></li>
                    <li class="active"><a href="/category/tools.html">Tools</a></li>
                    <li><a href="/category/web.html">web</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/pelican-learn.html">Pelican 学习笔记</a></h1>
<footer class="post-info">
        <abbr class="published" title="2014-10-06T10:20:00+00:00">
                Published: 一 06 十月 2014
        </abbr>

<p>In <a href="/category/tools.html">Tools</a>.</p>

</footer><!-- /.post-info --><h3>学习材料</h3>
<p>官方文档：http://docs.getpelican.com/en/3.3.0/</p>
<h3>介绍</h3>
<p>可以在github上搭建一个全静态化的博客网站.</p>
<h3>安装等准备工作</h3>
<p>http://docs.getpelican.com/en/3.3.0/getting_started.html</p>
<h3>pelican theme tool</h3>
<p>http://docs.getpelican.com/en/3.3.0/pelican-themes.html</p>
<h3>开启/停止本地web服务器：</h3>
<div class="highlight"><pre><span></span><span class="nb">alias</span> <span class="nv">myblogst</span><span class="o">=</span><span class="s1">&#39;cd ~/app/myblog/ &amp;&amp;./develop_server.sh start&#39;</span>
<span class="nb">alias</span> <span class="nv">myblogsp</span><span class="o">=</span><span class="s1">&#39;cd ~/app/myblog/ &amp;&amp;./develop_server.sh stop&#39;</span>
</pre></div>


<p>创建一个新的博客项目：</p>
<h3>进入新建的目录，比如myblog目录</h3>
<div class="highlight"><pre><span></span><span class="nv">$pelican</span>-quickstart
</pre></div>


<h3>同步网站：(同步方法在执行pelican命令时可选)</h3>
<div class="highlight"><pre><span></span>make rsync_upload
其他命令：
升级pelican：$ pip install --upgrade pelican
</pre></div>


<h3>网站配置文件：pelicanconf.py</h3>
<div class="highlight"><pre><span></span>不使用content文件夹下的子目录做分类标志：USE_FOLDER_AS_CATEGORY<span class="o">=</span>False
文章摘要长度：SUMMARY_MAX_LENGTH
设置提取文件名元数据的正则表达式：FILENAME_METADATA
是否在主目录显示page：DISPLAY_PAGES_ON_MENU
</pre></div>


<h3>工具</h3>
<p>Fabric :对一些pelican命令的封装 方便使用（我再也不用使用./bashrc的别名来执行pelican的命令，虽然还是很好用的）</p>
<div class="highlight"><pre><span></span>fab安装：pip install Fabric
fab常用命令：
生成网站：fab build
重新生成网站：fab regenerate
启动web服务器：fab serve
开启ssh:fab publish
</pre></div>


<p>Make:也是一些pelican命令的封装</p>
<div class="highlight"><pre><span></span>生成网站：make html
重新生成网站：make regenerate
启动web服务器：make serve
重新生成网站并且再次启动web服务器：make devserver
</pre></div>


<h3>设置评论：disqus</h3>
<ol>
<li>
<p>注册并登录 http://disqus.com/</p>
</li>
<li>
<p>添加新的网站</p>
</li>
</ol>
<div class="highlight"><pre><span></span>Site name ：<span class="o">{</span>任意名字<span class="o">}</span>
Choose your unique Disqus URL: <span class="o">{</span>lotaku<span class="o">}</span>.disqus.com
<span class="c1">#lotaku是短域名，要记住的！在pelicanconf.py的配置中要用到。</span>
进入Admin &gt; Settings &gt; Advanced,将以下域名添加到 Trusted Domains

lotaku.github.io <span class="c1">#我的博客域名</span>
<span class="m">127</span>.0.0.1        <span class="c1">#本地调试域名</span>
localhost        <span class="c1">#本地调试域名</span>
打开博客项目根目录下的配置文件

<span class="c1">#pelicanconf.py 添加:</span>
<span class="nv">SITEURL</span> <span class="o">=</span> <span class="s1">&#39;http://lotaku.github.io&#39;</span>
<span class="c1">#如果要在本地调试测试显示disqus,修改SITEURL</span>
<span class="c1">#SITEURL = &#39;http://127.0.0.1:8000&#39;</span>
<span class="nv">THEME</span> <span class="o">=</span>u<span class="s1">&#39;/home/l/app/myblog3/mytheme/pelican-elegant-1.3&#39;</span>
<span class="nv">DISQUS_SITENAME</span> <span class="o">=</span> u<span class="s1">&#39;lotaku&#39;</span>
</pre></div>


<h3>主题设置</h3>
<p>使用中的主题：<a href="http://oncrashreboot.com/elegant-best-pelican-theme-features">pelican-elegant-1.3</a></p>
<h3>使用记录</h3>
<div class="highlight"><pre><span></span><span class="c1">#在pelicanconf.py 中添加,以下代码，主题的搜索等功能需要</span>

<span class="nv">PLUGINS</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;sitemap&#39;</span>, <span class="s1">&#39;extract_toc&#39;</span>, <span class="s1">&#39;tipue_search&#39;</span><span class="o">]</span>
<span class="nv">MD_EXTENSIONS</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;codehilite(css_class=highlight)&#39;</span>, <span class="s1">&#39;extra&#39;</span>, <span class="s1">&#39;headerid&#39;</span>, <span class="s1">&#39;toc&#39;</span><span class="o">]</span>
<span class="nv">DIRECT_TEMPLATES</span> <span class="o">=</span> <span class="o">((</span><span class="s1">&#39;index&#39;</span>, <span class="s1">&#39;tags&#39;</span>, <span class="s1">&#39;categories&#39;</span>,<span class="s1">&#39;archives&#39;</span>, <span class="s1">&#39;search&#39;</span>, <span class="s1">&#39;404&#39;</span><span class="o">))</span>
<span class="nv">STATIC_PATHS</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;theme/images&#39;</span>, <span class="s1">&#39;images&#39;</span><span class="o">]</span>
<span class="nv">TAG_SAVE_AS</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="nv">CATEGORY_SAVE_AS</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="nv">AUTHOR_SAVE_AS</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</pre></div>


<h3>备份整个博客</h3>
<div class="highlight"><pre><span></span><span class="nb">alias</span> <span class="nv">myblogbackup_to_dropbox</span><span class="o">=</span><span class="s1">&#39;cp -r ~/app/myblog/* ~/Dropbox/myblog/&#39;</span>
</pre></div>                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>